{% extends "main/base.html.twig" %}

{% block content %}
    <div class="box">
    <div class="col-lg-12">

    <ul>
        <li>{{ offer.title }}</li>
        <li>Product name: {{ product.name }}</li>
        <li>Product quantity: {{ product.quantity }}</li>
        <li>Price: {{ offer.price }}</li>
        <li>{{ offer.description }}</li>
        <li>Publisher: {{ offer.user.username }}</li>
    </ul>
    {% if offer.user.username == app.user.username|default(null) %}
        <div>
            <a href="{{ path('offers_cancel',{'id':offer.id}) }}">Cancel offer</a>
        </div>
    {% else %}
        {{ form_start(cart_form) }}
        {{ form_widget(cart_form) }}
        <input type="submit" value="Add to cart!" class="btn btn-primary">
        {{ form_end(cart_form) }}
    {% endif %}

    <div class="col-lg-12">
        <h3 class="text-center"><strong>Reviews</strong></h3>
    </div>

    <div class="col-lg-6 col-lg-offset-3">
        {% form_theme review_form 'bootstrap_3_layout.html.twig' %}
        {{ form_start(review_form) }}
            {{ form_widget(review_form) }}
            <input type="submit" value="Leave review" class="btn btn-default" formnovalidate>
        {{ form_end(review_form) }}
    </div>

    {% if offer.reviews is empty %}
        <div class="col-lg-12">
            <h3 class="text-center">No reviews found</h3>
        </div>
    {% else %}
        {% for review in offer.reviews %}
            <div class="col-lg-12 col-lg-offset-3">
                Author: {{ review.user.username }}
                {{ review.body }}
            </div>
        {% endfor %}
    {% endif %}

    </div>
    </div>
{% endblock %}